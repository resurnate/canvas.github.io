<!DOCTYPE html>
<html>
<body>
<h1>HTML5 Canvas</h1>

<canvas id="myCanvas" width="630" height="630"></canvas>

<!--
<canvas id="myCanvas2" width="630" height="630" style="border:1px solid grey;"></canvas>
-->

<script>
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");

// Load images
// https://stackoverflow.com/questions/30496817/javascript-drawimage-only-works-on-refresh
//var background = new Image();
//background.src = "https://canvas.resurnate.com/img/speech.png";
//const image = new Image(60, 45); // Using optional size for image
//let bubble = getBubble();
//bubble.onload = drawImageAfterLoad(); // Draw when image has loaded


var imageURLs=[];  
imageURLs.push("https://canvas.resurnate.com/img/speech.png");
var imgs=[];
var imagesOK=0;
startLoadingAllImages(imagesAreNowLoaded);

//function getBubble(){
//  let bubble = new Image();
//  bubble.src = "https://canvas.resurnate.com/img/speech.png";
//  return bubble;
//}

function startLoadingAllImages(callback){

  // iterate through the imageURLs array and create new images for each
  for (var i=0; i<imageURLs.length; i++) {
    // create a new image an push it into the imgs[] array
    var img = new Image();
    // Important! By pushing (saving) this img into imgs[],
    //     we make sure the img variable is free to
    //     take on the next value in the loop.
    imgs.push(img);
    // when this image loads, call this img.onload
    img.onload = function(){ 
      // this img loaded, increment the image counter
      imagesOK++; 
      // if we've loaded all images, call the callback
      if (imagesOK>=imageURLs.length ) {
        callback();
      }
    };
    // notify if there's an error
    img.onerror=function(){alert("image load failed");} 
    // set img properties
    img.src = imageURLs[i];
  }      
}


function imagesAreNowLoaded() {
  // Use the intrinsic size of image in CSS pixels for the canvas element
//  canvas.width = this.naturalWidth;
//  canvas.height = this.naturalHeight;

  // Will draw the image as 300x227, ignoring the custom size of 60x45
  // given in the constructor
//  ctx.drawImage(this, 0, 0);

  // To use the custom size we'll have to specify the scale parameters
  // using the element's width and height properties - lets draw one
  // on top in the corner:
//  ctx.drawImage(this, 0, 0, this.width, this.height);



// Background
var my_gradient = ctx.createLinearGradient(0, 0, 0, 595);
my_gradient.addColorStop(0, "#B3B3B3");
my_gradient.addColorStop(1, "#F7F7F7");
ctx.fillStyle = my_gradient;
ctx.fillRect(10,10,610,610);
ctx.strokeStyle = "#666666";
ctx.strokeRect(10,10,610,610);

// Bubble
// 631x471
ctx.drawImage(imgs[0], 0, 105);
ctx.font="30px Comic Sans MS";
ctx.fillStyle = "black";
ctx.textAlign = "center";
ctx.fillText("ANOTHER... THAT IS SUPER", 310, 175);
ctx.fillText("ANOTHER... THAT IS SUPER", 310, 205);
ctx.fillText("JUST GOING TO THAT IS SUPER", 310, 235);
ctx.fillText("PUMP OUT SOME THAT IS SUPER", 310, 265);
ctx.fillText("BOILERPLATE CRAP THAT IS SUPER", 310, 295);
ctx.fillText("SOME MIDDLE TEXT THAT IS SUPER", 310, 325);
ctx.fillText("I'VE DONE A THAT IS SUPER", 310, 355);
ctx.fillText("THOUSAND TIMES THAT IS SUPER", 310, 385);
ctx.fillText("BEFORE... THAT IS SUPER", 310, 415);
ctx.fillText("ANOTHER... THAT IS SUPER", 310, 445);
ctx.fillText("ANOTHER... THAT IS SUPER", 310, 475);

// Top left corner box
ctx.fillStyle = "#FFFF88";
ctx.fillRect(0,0,310,90);
ctx.strokeRect(0, 0, 310, 90);
ctx.font="italic bold 27px Comic Sans MS";
ctx.fillStyle = "black";
ctx.textAlign = "center";
ctx.fillText("DURING THE NEXT", 150, 40);
ctx.fillText("STANDUP...", 150, 67);

// Top right corner box
ctx.fillStyle = "#FFFFCC";
ctx.fillRect(320,0,310,90);
ctx.strokeRect(320,0,310,90);

// Bottom left corner box
ctx.fillStyle = "#CCE5FF";
ctx.fillRect(0,540,310,90);
ctx.strokeRect(0,540,310,90);
ctx.font="27px Comic Sans MS";
ctx.fillStyle = "black";
ctx.textAlign = "center";
ctx.fillText("ME TO PARTNER", 150, 580);
ctx.fillText("(WINDING DOWN STU)", 150, 607);

// Bottom right corner box
ctx.fillStyle = "#DAE8FC";
ctx.fillRect(320,540,310,90);
ctx.strokeRect(320,540,310,90);
ctx.fillStyle = "black";
ctx.textAlign = "center";
ctx.fillText("ME TO PARTNER", 474, 580);
ctx.fillText("(SWARM OF HORNETS)", 474, 607);


}

</script>

</body>
</html>
